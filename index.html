<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>jQuery New Account Creation Form</title>

</head>

<body>
    <h1>jQuery New Account Creation Form</h1>
    <form id="new-account-form">
        <p><input type="email" size="30" name="email" value="" placeholder="Enter your email address"></p>
        <p><input type="password" size="30" name="password1" value="" placeholder="Enter a password"></p>
        <p><input type="password" size="30" name="password2" value="" placeholder="Reenter the password"></p>
        <button type="submit">Create Account</button>
    </form>
    <span id='output' style="font-weight: bold"></span>
   <!-- <p>Form Output: <span id="output"></span></p> -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script>
        let emailInput = $("input[name='email']");
        let password1Input = $("input[name='password1']");
        let password2Input = $("input[name='password2']");
        let ouptut = $("#output");
        function clearResults()
        {
            $(output).html("");
        }
        $("input").focus(function(){
            clearResults();
        });
        function isValidEmail() {
            em = $.trim(emailInput.val());
            const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
            if (emailPattern.test(em)) {
                return true;
            }
            else {
                // Add your code here to handle the error. 
                return false;
            }
        }
        function isValidPassword() {
            let pw1 = $.trim(password1Input.val());
            let pw2 = $.trim(password2Input.val());
            if(pw1 === pw2 && pw1.length > 0)
            {
                return true;
            }
            return false;
        }

        /*$(document).on("submit",function(e) {
            e.preventDefault();
            clearResults();
            console.log("hello");
            if (isValidPassword() && isValidEmail()) {
                var emvalue = '<p>' + em + '</p>';
                $('#output').append("<p>Form Output:<\p>")
                $('#output').append(emvalue);
                $('#output').append('Passwords Match');
        
            }
        });*/
        $(document).on("submit", function (e) {
            e.preventDefault();
            clearResults();
            if (isValidPassword() && isValidEmail()) {
                var emvalue = '<p>' + em + '</p>';
                $('#output').append("<p>Form Output:<\p>")
                $('#output').append(emvalue);
                $('#output').append('Passwords Match');
            }
            if(!isValidEmail())
            {
                $("#output").append("<p><font color = 'red'>Missing or Invalid Email</font></p>");
            }
            if(!isValidPassword())
            {
                $("#output").append("<p><font color = 'red'>Missing or Invalid Passwords</font></p>");
            }
        });
        /* function isValidEmail() {
            em = $.trim(emailInput.val());
            const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
            if (emailPattern.test(em)) {
                return true;
            }
            else {
                // Add your code here to handle the error. 
                return false;
            }
        }
        function isValidPassword() {
            let pw1 = $.trim(password1Input.val());
            let pw2 = $.trim(password2Input.val());
            if(pw1 === pw2 && pw1.length > 0)
            {
                return true;
            }
            return false;
        }

        $(document).on("submit",function(e) {
            e.preventDefault();
            clearResults();
            console.log("hello");
            if (isValidPassword() && isValidEmail()) {
                var emvalue = '<p>' + em + '</p>';
                $('#output').append("<p>Form Output:<\p>")
                $('#output').append(emvalue);
                $('#output').append('Passwords Match');
        
            }
        }); */


    </script>
</body>

</html>